!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.CollectionRepeat=e():t.CollectionRepeat=e()}("undefined"!=typeof self?self:this,function(){return function(t){var e={};function s(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports}return s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/",s(s.s="lVK7")}({SIi6:function(t,e){},"VU/8":function(t,e){t.exports=function(t,e,s,i,n,o){var r,a=t=t||{},l=typeof t.default;"object"!==l&&"function"!==l||(r=t,a=t.default);var h,c="function"==typeof a?a.options:a;if(e&&(c.render=e.render,c.staticRenderFns=e.staticRenderFns,c._compiled=!0),s&&(c.functional=!0),n&&(c._scopeId=n),o?(h=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},c._ssrRegister=h):i&&(h=i),h){var d=c.functional,u=d?c.render:c.beforeCreate;d?(c._injectStyles=h,c.render=function(t,e){return h.call(e),u(t,e)}):c.beforeCreate=u?[].concat(u,h):[h]}return{esModule:r,exports:a,options:c}}},lVK7:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={name:"CollectionRepeat",props:{list:{type:Array,default:function(){return[]}},margin:{type:Number,default:0}},data:function(){return{minScrollTranslate3dY:0,getHeightDone:!1,lastIndex:0,firstIndex:0,onChangeY:0,itemHeight:0,scrollTranslate3dY:0,showList:[],mList:[],lastMoveStart:0,lastMoveTime:0,stopInertiaMove:!1}},watch:{list:function(t,e){this.mList=t,this.drawList()},scrollTranslate3dY:function(t,e){if(t<e){if(t<this.onChangeY&&this.lastIndex<this.mList.length-1)for(var s=parseInt((this.onChangeY-t)/this.itemHeight),i=0;i<s;i++)this.onChangeY-=this.itemHeight,this.firstIndex++,this.lastIndex++,this.showList.push(this.mList[this.lastIndex]),this.showList.shift()}else if(t<0&&t>this.onChangeY&&this.firstIndex>0)for(var n=parseInt((t-this.onChangeY)/this.itemHeight),o=0;o<n;o++)this.onChangeY+=this.itemHeight,this.firstIndex--,this.lastIndex--,this.showList.unshift(this.mList[this.firstIndex]),this.showList.pop()}},mounted:function(){this.windowHeight=window.innerHeight},methods:{drawList:function(){var t=this;this.getHeightDone=!1,this.$nextTick(function(){var e=t.mList.length;t.itemHeight=t.$refs.hideItem.clientHeight-1+t.margin,t.minScrollTranslate3dY=t.windowHeight-e*t.itemHeight,t.getHeightDone=!0;var s=parseInt(1.6*t.windowHeight/t.itemHeight),i=e<s?e:s;t.lastIndex=i-1,t.firstIndex=0,t.onChangeY=.3*-t.windowHeight,t.mList=t.mList.map(function(e,s){return{data:e,translate3dY:s*t.itemHeight}}),t.showList=t.mList.slice(0,i)})},touchStart:function(t){this.lastY=t.touches[0].pageY,this.lastMoveStart=this.lastY,this.lastMoveTime=Date.now(),this.stopInertiaMove=!0},touchMove:function(t){var e=t.touches[0].pageY,s=e-this.lastY;s>0&&this.scrollTranslate3dY>0||s<0&&this.scrollTranslate3dY<this.minScrollTranslate3dY?this.scrollTranslate3dY+=s/2:this.scrollTranslate3dY+=s,this.lastY=e;var i=Date.now();this.stopInertiaMove=!0,i-this.lastMoveTime>300&&(this.lastMoveTime=i,this.lastMoveStart=e)},touchEnd:function(t){var e=Date.now();this.stopInertiaMove=!1;var s=e-this.lastMoveTime,i=(this.lastY-this.lastMoveStart)/s;this.scrollTranslate3dY<0&&this.scrollTranslate3dY>this.minScrollTranslate3dY?s<300&&this.inertiaMove(i,e,this.scrollTranslate3dY):this.topScrollBack()},topScrollBack:function(){var t=this;if(!this.stopInertiaMove){var e=this.scrollTranslate3dY>0?0:this.minScrollTranslate3dY,s=.04*(this.scrollTranslate3dY-e),i=this.scrollTranslate3dY-s;this.scrollTranslate3dY=i,Math.round(i)!==e?setTimeout(function(){t.topScrollBack()}):this.scrollTranslate3dY=e}},inertiaMove:function(t,e,s){var i=this,n=Date.now();if(!this.stopInertiaMove){var o=t>0?-1:1,r=n-e,a=t+r*(6e-4*o);if(!(o*a>0)){var l=(t+a)/2*r;this.scrollTranslate3dY=s+l,this.scrollTranslate3dY>0&&this.scrollTranslate3dY>100*a||this.scrollTranslate3dY<this.minScrollTranslate3dY&&this.scrollTranslate3dY-this.minScrollTranslate3dY<100*a?setTimeout(function(){i.topScrollBack()}):setTimeout(function(){i.inertiaMove(t,e,s)},10)}}}}},n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"listContent",staticClass:"collection-repeat-content",on:{touchstart:t.touchStart,touchmove:t.touchMove,touchend:t.touchEnd}},[t.showList.length?s("div",{staticClass:"scroll",style:"transform: translate3d(0px, "+t.scrollTranslate3dY+"px, 0px) scale(1);"},[s("div",{staticClass:"list disable-user-behavior"},t._l(t.showList,function(e,i){return s("div",{staticClass:"item",style:"transform: translate3d(0px, "+e.translate3dY+"px, 0px) scale(1);"},[t._t("default",null,{item:e.data,index:i})],2)}))]):t._e(),t._v(" "),t.list.length&&!t.getHeightDone?s("div",{ref:"hideItem",staticClass:"hide-item"},[t._t("default",null,{item:t.list[0]})],2):t._e()])},staticRenderFns:[]};var o=s("VU/8")(i,n,!1,function(t){s("SIi6")},"data-v-8df818de",null).exports;e.default=o}})});
//# sourceMappingURL=collection-repeat.min.js.map