webpackJsonp([1],{NHnr:function(t,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=i("7+uW"),n={name:"CollectionRepeat",props:{list:Array},data:function(){return{lastIndex:0,firstIndex:0,onChangeY:0,itemHeight:0,contentOffsetTop:0,scrollTranslate3dY:0,showList:[],mList:[],lastMoveStart:0,lastMoveTime:0,stopInertiaMove:!1}},watch:{list:function(t,s){this.mList=t,this.drawList()},scrollTranslate3dY:function(t,s){if(t<s){if(t<this.onChangeY)for(var i=parseInt((this.onChangeY-t)/this.itemHeight),e=0;e<i;e++)this.onChangeY-=this.itemHeight,this.firstIndex++,this.lastIndex++,this.showList.push(this.mList[this.lastIndex]),this.showList.shift()}else if(t<0&&t>this.onChangeY&&this.firstIndex>0)for(var n=parseInt((t-this.onChangeY)/this.itemHeight),a=0;a<n;a++)this.onChangeY+=this.itemHeight,this.firstIndex--,this.lastIndex--,this.showList.unshift(this.mList[this.firstIndex]),this.showList.pop()}},mounted:function(){this.contentOffsetTop=this.$refs.listContent.offsetTop,this.windowHeight=window.innerHeight},methods:{drawList:function(){var t=this;this.$nextTick(function(){t.itemHeight=t.$refs.hideItem.clientHeight-1,t.count=parseInt(1.6*t.windowHeight/t.itemHeight),t.lastIndex=t.count-1,t.firstIndex=0,t.onChangeY=.3*-t.windowHeight,t.mList=t.mList.map(function(s,i){return{data:s,translate3dY:i*t.itemHeight}}),t.showList=t.mList.slice(0,t.count)})},touchStart:function(t){this.lastY=t.touches[0].pageY,this.lastMoveStart=this.lastY,this.lastMoveTime=Date.now(),this.stopInertiaMove=!0},touchMove:function(t){var s=t.touches[0].pageY,i=s-this.lastY;this.scrollTranslate3dY>0&&i>0?this.scrollTranslate3dY+=i/2:this.scrollTranslate3dY+=i,this.lastY=s;var e=Date.now();this.stopInertiaMove=!0,e-this.lastMoveTime>300&&(this.lastMoveTime=e,this.lastMoveStart=s)},touchEnd:function(t){var s=Date.now();this.stopInertiaMove=!1;var i=s-this.lastMoveTime,e=(this.lastY-this.lastMoveStart)/i;this.scrollTranslate3dY<0?i<300&&this.inertiaMove(e,s,this.scrollTranslate3dY):this.topScrollBack()},topScrollBack:function(t){var s=this;if(!this.stopInertiaMove){var i=.04*this.scrollTranslate3dY,e=this.scrollTranslate3dY-i;e<0&&(e=0),this.scrollTranslate3dY=e,0!=e.toFixed(0)&&setTimeout(function(){s.topScrollBack()})}},inertiaMove:function(t,s,i){var e=this,n=Date.now();if(!this.stopInertiaMove){var a=t>0?-1:1,o=n-s,r=t+o*(6e-4*a);if(!(a*r>0)){var l=(t+r)/2*o;this.scrollTranslate3dY=i+l,this.scrollTranslate3dY>0&&this.scrollTranslate3dY>100*r?setTimeout(function(){e.topScrollBack()}):setTimeout(function(){e.inertiaMove(t,s,i)},10)}}}}},a={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{ref:"listContent",staticClass:"list-content",on:{touchstart:t.touchStart,touchmove:t.touchMove,touchend:t.touchEnd}},[i("div",{staticClass:"scroll",style:"transform: translate3d(0px, "+t.scrollTranslate3dY+"px, 0px) scale(1);"},[i("div",{ref:"list",staticClass:"list disable-user-behavior"},t._l(t.showList,function(s,e){return i("div",{staticClass:"item",style:"transform: translate3d(0px, "+s.translate3dY+"px, 0px) scale(1);"},[t._t("default",[t._v("\n          "+t._s(s.data)+"\n        ")],{item:s.data})],2)}))]),t._v(" "),i("div",{ref:"hideItem",staticClass:"hide-item"},[t._t("default",[t._v("\n      "+t._s(t.list[0])+"\n    ")],{item:t.list[0]})],2)])},staticRenderFns:[]};var o={name:"App",components:{CollectionRepeat:i("VU/8")(n,a,!1,function(t){i("WS4X")},"data-v-14b262bc",null).exports},data:function(){return{list:[]}},mounted:function(){for(var t=1;t<1e5;t++)this.list.push(t)}},r={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{attrs:{id:"app"}},[i("div",{staticClass:"title"},[t._v("\n    "+t._s(t.list.length)+"Item\n  ")]),t._v(" "),i("CollectionRepeat",{attrs:{list:t.list},scopedSlots:t._u([{key:"default",fn:function(s){return[i("div",{staticClass:"my-item"},[t._v("\n        "+t._s(s.item)+"\n      ")])]}}])})],1)},staticRenderFns:[]};var l=i("VU/8")(o,r,!1,function(t){i("f2to")},null,null).exports;e.a.config.productionTip=!1,new e.a({el:"#app",components:{App:l},template:"<App/>"})},WS4X:function(t,s){},f2to:function(t,s){}},["NHnr"]);
//# sourceMappingURL=app.c1cf3f2e16aec639090f.js.map